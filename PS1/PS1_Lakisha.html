<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="1093122">

<title>PS1_Lakisha</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="PS1_Lakisha_files/libs/clipboard/clipboard.min.js"></script>
<script src="PS1_Lakisha_files/libs/quarto-html/quarto.js"></script>
<script src="PS1_Lakisha_files/libs/quarto-html/popper.min.js"></script>
<script src="PS1_Lakisha_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="PS1_Lakisha_files/libs/quarto-html/anchor.min.js"></script>
<link href="PS1_Lakisha_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="PS1_Lakisha_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="PS1_Lakisha_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="PS1_Lakisha_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="PS1_Lakisha_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">PS1_Lakisha</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>1093122 </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.2     ✔ tibble    3.2.1
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
✔ purrr     1.0.4     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>bm <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://ditraglia.com/data/lakisha_aer.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 4870 Columns: 65
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (10): id, ad, firstname, sex, race, city, kind, expminreq, schoolreq, ow...
dbl (55): education, ofjobs, yearsexp, honors, volunteer, military, empholes...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<section id="exercise-1" class="level2">
<h2 class="anchored" data-anchor-id="exercise-1">Exercise 1</h2>
<section id="a." class="level3">
<h3 class="anchored" data-anchor-id="a.">a.</h3>
<p>There is significant racial inequality in the US labour market and BM try to find whether it is a result of racial bias or other characteristics that are unobservable to the researchers but observable to the employers.</p>
</section>
<section id="b." class="level3">
<h3 class="anchored" data-anchor-id="b.">b.</h3>
<p>They create a bank of fictitious resumes to help-wanted ads in Boston and Chicago newspapers and measure callback for interview for each sent resume. The resumes are randomly assigned African-American or White-sounding names. They also produce high-quality and low-quality resumes to study how responsive callbacks are to credentials for African-American names compared with White names.The resumes are also sent to a large spetrum of job quality and industries.</p>
</section>
<section id="c." class="level3">
<h3 class="anchored" data-anchor-id="c.">c.</h3>
<p>They find large racial differences in callback rates. White names receive 50 percent more callbacks for interviews. Callbacks are also more responsive to resume quality for White names than for African-American ones. Applicants with African-American names can find it difficult to overcome this difficulty by improving their observable skills and credentials. The racial gap is uniform across occupation, industry, and employer size. Hence, training program might not be enough to alleviate this racial gap and other forces might be needed.</p>
</section>
</section>
<section id="exercise-2" class="level2">
<h2 class="anchored" data-anchor-id="exercise-2">Exercise 2</h2>
<section id="a.-1" class="level3">
<h3 class="anchored" data-anchor-id="a.-1">a.</h3>
<p>It has 4870 rows and 65 columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>bm</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4,870 × 65
   id    ad    education ofjobs yearsexp honors volunteer military empholes
   &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
 1 b     1             4      2        6      0         0        0        1
 2 b     1             3      3        6      0         1        1        0
 3 b     1             4      1        6      0         0        0        0
 4 b     1             3      4        6      0         1        0        1
 5 b     1             3      3       22      0         0        0        0
 6 b     1             4      2        6      1         0        0        0
 7 b     1             4      2        5      0         1        0        0
 8 b     1             3      4       21      0         1        0        1
 9 b     1             4      3        3      0         0        0        0
10 b     1             4      2        6      0         1        0        0
# ℹ 4,860 more rows
# ℹ 56 more variables: occupspecific &lt;dbl&gt;, occupbroad &lt;dbl&gt;,
#   workinschool &lt;dbl&gt;, email &lt;dbl&gt;, computerskills &lt;dbl&gt;, specialskills &lt;dbl&gt;,
#   firstname &lt;chr&gt;, sex &lt;chr&gt;, race &lt;chr&gt;, h &lt;dbl&gt;, l &lt;dbl&gt;, call &lt;dbl&gt;,
#   city &lt;chr&gt;, kind &lt;chr&gt;, adid &lt;dbl&gt;, fracblack &lt;dbl&gt;, fracwhite &lt;dbl&gt;,
#   lmedhhinc &lt;dbl&gt;, fracdropout &lt;dbl&gt;, fraccolp &lt;dbl&gt;, linc &lt;dbl&gt;, col &lt;dbl&gt;,
#   expminreq &lt;chr&gt;, schoolreq &lt;chr&gt;, eoe &lt;dbl&gt;, parent_sales &lt;dbl&gt;, …</code></pre>
</div>
</div>
</section>
<section id="b.-1" class="level3">
<h3 class="anchored" data-anchor-id="b.-1">b.</h3>
<p>“sex” column contains the sex of the individual indicated by the resume. “f” stands for female and “m” stands for male. “race” column contains the race of the individual implied by the resume. “w” stands for white and “b” stands for black. “firstname” column contains the fictitious name included in the resume.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>bm[<span class="fu">c</span>(<span class="st">"sex"</span>, <span class="st">"race"</span>, <span class="st">"firstname"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4,870 × 3
   sex   race  firstname
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    
 1 f     w     Allison  
 2 f     w     Kristen  
 3 f     b     Lakisha  
 4 f     b     Latonya  
 5 f     w     Carrie   
 6 m     w     Jay      
 7 f     w     Jill     
 8 f     b     Kenya    
 9 f     b     Latonya  
10 m     b     Tyrone   
# ℹ 4,860 more rows</code></pre>
</div>
</div>
</section>
<section id="c.-1" class="level3">
<h3 class="anchored" data-anchor-id="c.-1">c.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use mutate to create the column. use ifelse to generate TRUE/FALSE values depending on the condition (female/black)</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>bm <span class="ot">&lt;-</span> bm <span class="sc">|&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">female =</span> <span class="fu">ifelse</span>(sex <span class="sc">==</span> <span class="st">"f"</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>),</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">black =</span> <span class="fu">ifelse</span>(race <span class="sc">==</span> <span class="st">"b"</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>))</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>bm</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4,870 × 67
   id    ad    education ofjobs yearsexp honors volunteer military empholes
   &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
 1 b     1             4      2        6      0         0        0        1
 2 b     1             3      3        6      0         1        1        0
 3 b     1             4      1        6      0         0        0        0
 4 b     1             3      4        6      0         1        0        1
 5 b     1             3      3       22      0         0        0        0
 6 b     1             4      2        6      1         0        0        0
 7 b     1             4      2        5      0         1        0        0
 8 b     1             3      4       21      0         1        0        1
 9 b     1             4      3        3      0         0        0        0
10 b     1             4      2        6      0         1        0        0
# ℹ 4,860 more rows
# ℹ 58 more variables: occupspecific &lt;dbl&gt;, occupbroad &lt;dbl&gt;,
#   workinschool &lt;dbl&gt;, email &lt;dbl&gt;, computerskills &lt;dbl&gt;, specialskills &lt;dbl&gt;,
#   firstname &lt;chr&gt;, sex &lt;chr&gt;, race &lt;chr&gt;, h &lt;dbl&gt;, l &lt;dbl&gt;, call &lt;dbl&gt;,
#   city &lt;chr&gt;, kind &lt;chr&gt;, adid &lt;dbl&gt;, fracblack &lt;dbl&gt;, fracwhite &lt;dbl&gt;,
#   lmedhhinc &lt;dbl&gt;, fracdropout &lt;dbl&gt;, fraccolp &lt;dbl&gt;, linc &lt;dbl&gt;, col &lt;dbl&gt;,
#   expminreq &lt;chr&gt;, schoolreq &lt;chr&gt;, eoe &lt;dbl&gt;, parent_sales &lt;dbl&gt;, …</code></pre>
</div>
</div>
</section>
</section>
<section id="exercise-3" class="level2">
<h2 class="anchored" data-anchor-id="exercise-3">Exercise 3</h2>
<section id="a.-2" class="level3">
<h3 class="anchored" data-anchor-id="a.-2">a.</h3>
<p>The experimenters created their bank of resumes by starting with real resumes posted on job search websites from job seekers in Boston and Chicago. They altered the resumes by replacing school and employer names with equivalent institutions from the opposite city (e.g., Boston resumes were adapted for Chicago and vice versa). They further diversified the resumes by varying fonts, layouts, and cover letter styles.</p>
</section>
<section id="b.-2" class="level3">
<h3 class="anchored" data-anchor-id="b.-2">b.</h3>
<p>The resumes were classified into two groups: high-quality and low-quality. This classification was based on subjective criteria such as labor market experience, career profile, employment gaps, and listed skills. To reinforce the quality distinction, additional features were added to high-quality resumes, like summer jobs, volunteer experience, extra computer skills, certifications, foreign language skills, honors, or military experience.</p>
</section>
<section id="c.-2" class="level3">
<h3 class="anchored" data-anchor-id="c.-2">c.</h3>
<p>To generate identities for the fictitious applicants, the experimenters randomly assigned racially distinctive names, using birth certificate data to ensure name authenticity. They also assigned phone numbers (with race/gender-matched voicemail recordings), randomized postal addresses from real streets in Boston and Chicago, and created neutral email addresses for some resumes. This process ensured that the only systematic differences between applicants were their perceived race and resume quality.</p>
</section>
</section>
<section id="exercise-4" class="level2">
<h2 class="anchored" data-anchor-id="exercise-4">Exercise 4</h2>
<section id="a.-3" class="level3">
<h3 class="anchored" data-anchor-id="a.-3">a.</h3>
<p>The proportion of female for each race is around 77%. Hence, sex is balanced across race.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># group by race and calculate the proportion of female in each group</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>bm <span class="sc">|&gt;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(race) <span class="sc">|&gt;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">female_percent =</span> <span class="fu">mean</span>(female))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  race  female_percent
  &lt;chr&gt;          &lt;dbl&gt;
1 b              0.775
2 w              0.764</code></pre>
</div>
</div>
</section>
<section id="b.-3" class="level3">
<h3 class="anchored" data-anchor-id="b.-3">b.</h3>
<p>Computer skill are roughly balanced with around 80% of individuals in each group with computer skills</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># group by race and calculate the proportion of individuals with computer skills</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>bm <span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(race) <span class="sc">|&gt;</span> </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">cs_percent =</span> <span class="fu">mean</span>(computerskills))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  race  cs_percent
  &lt;chr&gt;      &lt;dbl&gt;
1 b          0.832
2 w          0.809</code></pre>
</div>
</div>
</section>
<section id="c.-3" class="level3">
<h3 class="anchored" data-anchor-id="c.-3">c.</h3>
<p>The average education level is very close between the two groups and the number of previous jobs are close too. The average number of previous jobs is around 3.6.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>bm <span class="sc">|&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(race) <span class="sc">|&gt;</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">education_avg =</span> <span class="fu">mean</span>(education),</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">ofjobs_avg =</span> <span class="fu">mean</span>(ofjobs))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  race  education_avg ofjobs_avg
  &lt;chr&gt;         &lt;dbl&gt;      &lt;dbl&gt;
1 b              3.62       3.66
2 w              3.62       3.66</code></pre>
</div>
</div>
</section>
<section id="d." class="level3">
<h3 class="anchored" data-anchor-id="d.">d.</h3>
<p>White individuals have slightly higher years of education on average but they also have higher standard deviation. Both groups have similar mean and variability.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>bm <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(race) <span class="sc">|&gt;</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">yearsexp_mean =</span> <span class="fu">mean</span>(yearsexp),</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">yearsexp_sd =</span> <span class="fu">sd</span>(yearsexp))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  race  yearsexp_mean yearsexp_sd
  &lt;chr&gt;         &lt;dbl&gt;       &lt;dbl&gt;
1 b              7.83        5.01
2 w              7.86        5.08</code></pre>
</div>
</div>
</section>
<section id="e." class="level3">
<h3 class="anchored" data-anchor-id="e.">e.</h3>
<p>We want to ensure that the treatment (African-American sounding names) are randomly assigned across the resumes. Hence, we want to check that the characteristics of the two groups are similar to each other on average.</p>
</section>
<section id="f." class="level3">
<h3 class="anchored" data-anchor-id="f.">f.</h3>
<p>The proportion of males with computer skills are significantly lower than that for females. The average level of education for male is higher than female. This is because the authors use nearly exclusively female names for administrative and clerical jobs to increase callback rates. These jobs typically require computer skills but lower education. Since the focus of the research is on race differentials, the gender imbalance in certain characteristics does not invalidate its conclusion as long as gender is balanced across each race group. We have shown this is the case in (a).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>bm <span class="sc">|&gt;</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">cs_avg =</span> <span class="fu">mean</span>(computerskills),</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">edu_avg =</span> <span class="fu">mean</span>(education))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  sex   cs_avg edu_avg
  &lt;chr&gt;  &lt;dbl&gt;   &lt;dbl&gt;
1 f      0.868    3.58
2 m      0.662    3.73</code></pre>
</div>
</div>
</section>
</section>
<section id="exercise-5" class="level2">
<h2 class="anchored" data-anchor-id="exercise-5">Exercise 5</h2>
<section id="a.-4" class="level3">
<h3 class="anchored" data-anchor-id="a.-4">a.</h3>
<p>Calculate the average callback rate for all resumes</p>
<p>The average callback rate for all resumes in Table 1 of the paper <span class="math display">\[ 9.65*0.5 + 6.45*0.5 = 8.05\]</span> This is almost identical to the average callback rate I obtained below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>bm <span class="sc">|&gt;</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">callback_avg =</span> <span class="fu">mean</span>(call)<span class="sc">*</span><span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  callback_avg
         &lt;dbl&gt;
1         8.05</code></pre>
</div>
</div>
</section>
<section id="b.-4" class="level3">
<h3 class="anchored" data-anchor-id="b.-4">b.</h3>
<p>On average, White-sounding names are 50% more likely than African-American names to get a callback. This suggests there is still significant differential treatment by race, even if the other characteristics of the two groups are controlled to be very similar.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>bm <span class="sc">|&gt;</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(race) <span class="sc">|&gt;</span> </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">callback_avg =</span> <span class="fu">mean</span>(call)<span class="sc">*</span><span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  race  callback_avg
  &lt;chr&gt;        &lt;dbl&gt;
1 b             6.45
2 w             9.65</code></pre>
</div>
</div>
</section>
<section id="c.-4" class="level3">
<h3 class="anchored" data-anchor-id="c.-4">c.</h3>
<p>The results suggest that within each sex, African Americans have a lower callback rate than White. The racial gap (percentage difference) is slightly larger for males than for females. Within each race, female obtains higher callback rates, likely due to the reason mentioned in 4.f.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>bm <span class="sc">|&gt;</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(race, sex) <span class="sc">|&gt;</span> </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">callback_avg =</span> <span class="fu">mean</span>(call)<span class="sc">*</span><span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'race'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
# Groups:   race [2]
  race  sex   callback_avg
  &lt;chr&gt; &lt;chr&gt;        &lt;dbl&gt;
1 b     f             6.63
2 b     m             5.83
3 w     f             9.89
4 w     m             8.87</code></pre>
</div>
</div>
</section>
</section>
<section id="exercise-6" class="level2">
<h2 class="anchored" data-anchor-id="exercise-6">Exercise 6</h2>
<section id="a.-5" class="level3">
<h3 class="anchored" data-anchor-id="a.-5">a.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>callback_b <span class="ot">&lt;-</span> bm <span class="sc">|&gt;</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(black <span class="sc">==</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(call)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>callback_w <span class="ot">&lt;-</span> bm <span class="sc">|&gt;</span> </span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(black <span class="sc">==</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(call)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="b.-5" class="level3">
<h3 class="anchored" data-anchor-id="b.-5">b.</h3>
<p>Test statistics used: <span class="math display">\[ t = \frac{(\overline{X}_1 - \overline{X}_2)}{\sqrt{\frac{S_1^2}{n_1} + \frac{S_2^2}{n_2}}}\]</span></p>
<p>Assume unequal varainces, compute the degrees of freedom as follows: <span class="math display">\[
df = \frac{\left( \frac{s_1^2}{n_1} + \frac{s_2^2}{n_2} \right)^2}
{\frac{\left( \frac{s_1^2}{n_1} \right)^2}{n_1 - 1} + \frac{\left( \frac{s_2^2}{n_2} \right)^2}{n_2 - 1}}\]</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># obtain sample size, mean and variance for black and white groups</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  sizeb <span class="ot">&lt;-</span> <span class="fu">length</span>(callback_b)  </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  meanb <span class="ot">&lt;-</span> <span class="fu">mean</span>(callback_b)  </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  varb <span class="ot">&lt;-</span> <span class="fu">var</span>(callback_b)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  sizew <span class="ot">&lt;-</span> <span class="fu">length</span>(callback_w) </span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  meanw <span class="ot">&lt;-</span> <span class="fu">mean</span>(callback_w) </span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  varw <span class="ot">&lt;-</span> <span class="fu">var</span>(callback_w)</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="co"># construct test statistics</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  test_stats <span class="ot">&lt;-</span> (meanw <span class="sc">-</span> meanb)<span class="sc">/</span><span class="fu">sqrt</span>(varw<span class="sc">/</span>sizew <span class="sc">+</span> varb<span class="sc">/</span>sizeb)</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>  test_stats</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4.114705</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate the degrees of freedom</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  numerator <span class="ot">&lt;-</span> (varw<span class="sc">/</span>sizew <span class="sc">+</span> varb<span class="sc">/</span>sizeb)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  denominator <span class="ot">&lt;-</span> ((varw<span class="sc">/</span>sizew)<span class="sc">^</span><span class="dv">2</span>)<span class="sc">/</span>(sizew<span class="dv">-1</span>) <span class="sc">+</span> ((varb<span class="sc">/</span>sizeb)<span class="sc">^</span><span class="dv">2</span>)<span class="sc">/</span>(sizeb<span class="dv">-1</span>)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> numerator<span class="sc">/</span>denominator</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4711.602</code></pre>
</div>
</div>
</section>
<section id="c.-5" class="level3">
<h3 class="anchored" data-anchor-id="c.-5">c.&nbsp;</h3>
<p>critical value for a two-sided t-test with <span class="math inline">\(\alpha = 0.05\)</span></p>
<p>for each tail, p = 0.025</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qnorm</span>(<span class="fl">0.975</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.959964</code></pre>
</div>
</div>
</section>
<section id="d.-1" class="level3">
<h3 class="anchored" data-anchor-id="d.-1">d.</h3>
<p>The result is consistent with Table 1 in which the p-value is almost zero.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pnorm</span>(test_stats, <span class="at">lower.tail =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.938372e-05</code></pre>
</div>
</div>
</section>
<section id="e.-1" class="level3">
<h3 class="anchored" data-anchor-id="e.-1">e.</h3>
<p>We reject the null hypothesis of no difference in callback rates between black- and white-sounding names at 5% significance level. This suggest the difference we found is significant and differential treatment according to race is still prominent in the US labor market.</p>
</section>
</section>
<section id="exercise-7" class="level2">
<h2 class="anchored" data-anchor-id="exercise-7">Exercise 7</h2>
<section id="a.-6" class="level3">
<h3 class="anchored" data-anchor-id="a.-6">a.</h3>
<p>Names can carry information about cultural identity and group affiliation. In 1970s, Blacks in racially isolated neighborhoods began to adopt increasingly distinctive names under the influence of Black Power movement while others move towards more assimilative names.It also contains information about socioeconomic status. The study finds that, over time, distinctively Black names became strong predictors of lower socioeconomic status.</p>
</section>
<section id="b.-6" class="level3">
<h3 class="anchored" data-anchor-id="b.-6">b.</h3>
<p>The experiment tracks callback rates for interviews, not final hiring decisions or wage outcomes. Although fewer callbacks likely lead to fewer job offers, the study cannot directly measure disparities in actual hiring rates or earnings. This limitation restricts its scope in fully capturing labor market discrimination.</p>
<p>The study signals race indirectly through names. Employers might miss the racial cues in names, leading to underestimation in discrimination. The finding apply specifically to people with racially distinctive names, not all African-Americans since some of them might have neutral names.</p>
<p>The experiment focuses on newspaper ads, just one of many job search channels. It does not account for social networks, which are another key channel. If African-Americans rely more on networks or if employers using networks discriminate less, the results may not fully represent labor market dynamics.</p>
</section>
<section id="c.-6" class="level3">
<h3 class="anchored" data-anchor-id="c.-6">c.</h3>
<p>Distinctive black-sounding names can be correlated with determinants of productivity not captured by a resume. They can also be correlated with lower socioeconomic status, which could cause employers to be biased against perceived socioeconomic background rather than race alone.</p>
</section>
<section id="d.-2" class="level3">
<h3 class="anchored" data-anchor-id="d.-2">d.</h3>
<p>Taste-Based Discrimination: This occurs when an employer discriminates against a group due to personal prejudice or a “taste” for preferring one group over another, regardless of productivity or qualifications. This suggests they are willing to incur costs to avoid hiring from a disfavored group.</p>
<p>Statistical Discrimination: This occurs when an employer uses group-based stereotypes or statistical averages to make decisions about individuals, due to incomplete information about their true productivity.</p>
<p>In the BM study, they found significant callback gap between White and Black names, even for identical resumes. This is consistent with taste-based discrimination. If employers have a prejudice against Black individuals and they have negative perception about distinctive black names, they may systematically reject resumes with Black names out of personal bias, regardless of qualifications. However, the study does not directly measure employers’ preferences and hence the taste-based discrimination is only inferred.</p>
<p>The BM results are also consistent with statistical discrimination.Employers may use Black names as proxies for unobservable characteristics of the individual such as educational quality.They might also infer the socioeconomic backgrounds from names and associate Black names with lower average productivity, which leads to lower callback rates for black-sounding names. However, Fryer and Levitt’s data show that Black names are not causally linked to worse life outcomes. If names were strong signals of productivity, we should expect impact on labour market outcomes, even after controlling for socioeconomic backgrounds.</p>
</section>
<section id="e.-2" class="level3">
<h3 class="anchored" data-anchor-id="e.-2">e.</h3>
<p>In the 1960s, Black and White Americans chose relatively similar names for their children. However, during the early 1970s, there was a drastic change in naming patterns, particularly among Blacks in racially segregated neighborhoods, who began giving their children highly distinctive names. This shift in naming patterns is likely to be triggered by the rise of Black Power movement. Among Black children born after the 1970s, a child’s name became a strong indicator of socioeconomic status. Fryer and Levitt also found no evidence that having a distinctively Black name causally harms a person’s life outcomes after controlling for background characteristics such as family and neighborhood circumstances.</p>
</section>
<section id="f.-1" class="level3">
<h3 class="anchored" data-anchor-id="f.-1">f.</h3>
<p>One possibility is that discrimination can be stage dependent.The discrimination observed by BM occurs primarily at the resume-screening stage, where names are the only racial cue. Fryer and Levitt suggest that once race is directly observed in interviews or hiring, the effect of names may diminish because employers can assess race directly, and other factors become more important. If discrimination primarily occurs at the callback stage, it may not significantly affect long-term outcome as suggested in Fryer and Levitt’s findings.</p>
<p>Another point is that black names may signal productivity beyond resume information. Black names may correlate with unobservable productivity factors not captured in BM’s resumes. Employers use names for statistical discrimination, assuming Black-named candidates are less productive on average due to socioeconomic status (SES) correlations. Fryer and Levitt’s controls for birth circumstances account for these factors, explaining why they find no negative name effect on outcomes.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>